!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../yaml/yaml")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../yaml/yaml"],t):t(CodeMirror)}(function(i){i.defineMode("yaml-frontmatter",function(t,e){var o=i.getMode(t,"yaml"),r=i.getMode(t,e&&e.base||"gfm");function a(t){return 1==t.state?{mode:o,state:t.yaml}:{mode:r,state:t.inner}}return{startState:function(){return{state:0,yaml:null,inner:i.startState(r)}},copyState:function(t){return{state:t.state,yaml:t.yaml&&i.copyState(o,t.yaml),inner:i.copyState(r,t.inner)}},token:function(t,e){var n,a;return 0==e.state?t.match("---",!1)?(e.state=1,e.yaml=i.startState(o),o.token(t,e.yaml)):(e.state=2,r.token(t,e.inner)):1==e.state?(n=t.sol()&&t.match(/(---|\.\.\.)/,!1),a=o.token(t,e.yaml),n&&(e.state=2,e.yaml=null),a):r.token(t,e.inner)},innerMode:a,indent:function(t,e,n){t=a(t);return t.mode.indent?t.mode.indent(t.state,e,n):i.Pass},blankLine:function(t){t=a(t);if(t.mode.blankLine)return t.mode.blankLine(t.state)}}})});